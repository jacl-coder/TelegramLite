# TelegramLite 大体开发流程

## 项目概述

TelegramLite 分布式 IM 系统，采用 C++ (高性能核心) + Go (业务逻辑) 混合架构。

## 整体开发顺序

### 第一步：项目基础搭建 (3-5 天)

1. **环境准备**

   - 安装 C++/Go 开发环境、Docker、数据库
   - 配置项目构建系统 (CMake + Go Modules)

2. **项目结构初始化**

   - 创建各服务目录结构
   - 配置 Docker Compose 本地开发环境

3. **协议定义**
   - 编写核心 gRPC Proto 文件
   - 生成 C++ 和 Go 代码

### 第二步：核心服务开发 (4-6 周)

#### M1: 用户体系 + Gateway (2-3 周)

- **Auth Service (Go)**: 注册/登录/JWT 认证
- **User Service (Go)**: 用户信息/好友管理
- **Gateway (C++)**: WebSocket 长连接/请求路由
- **数据库**: PostgreSQL 用户表设计

#### M2: 单聊消息 (3-4 周)

- **Msg Service (C++)**: 消息存储/同步/离线补偿
- **消息流**: 发送 → 存储 → 推送 → 多设备同步
- **Redis**: 缓存未读消息/在线状态

#### M3: 群聊功能 (3-4 周)

- **群组管理**: 创建群/成员管理 (≤200 人)
- **群消息**: 群聊消息发送/接收/同步
- **搜索**: PostgreSQL 全文检索

### 第三步：增强功能 (2-3 周)

#### M4: 文件和推送

- **File Service (Go)**: MinIO 文件存储
- **Push Service (Go)**: FCM/APNs 推送

### 第四步：部署运维 (1-2 周)

#### M5: 上线部署

- **容器化**: Docker 镜像 + K8s 配置
- **监控**: Prometheus + Grafana
- **CI/CD**: 自动化部署流水线

## 技术栈选择

### C++ 服务 (高性能)

- **Gateway**: Boost.Beast/uWebSockets
- **Msg Service**: 自研消息存储 + gRPC

### Go 服务 (快速开发)

- **框架**: Gin/Echo
- **数据库**: GORM + PostgreSQL
- **缓存**: go-redis

### 基础设施

- **存储**: PostgreSQL + Redis + MinIO
- **消息队列**: Kafka (可选)
- **部署**: Docker + Kubernetes

## 里程碑验收标准

- **M1 完成**: 用户可以注册登录，建立 WebSocket 连接
- **M2 完成**: 用户可以发送接收单聊消息，支持多设备同步
- **M3 完成**: 用户可以创建群聊，群内聊天，搜索消息
- **M4 完成**: 支持文件传输，离线推送通知
- **M5 完成**: 系统可以稳定部署运行，具备监控能力

## 开发重点

1. **先做通，再做好**: 优先实现端到端功能，再优化性能
2. **服务边界清晰**: C++ 和 Go 服务职责明确，减少跨语言调用
3. **消息可靠性**: 重点关注消息不丢失、不重复、有序到达
4. **多设备同步**: seq_id + 游标机制是核心难点

---

这是一个渐进式开发流程，每个里程碑都有可验收的功能，便于控制开发节奏和质量。
